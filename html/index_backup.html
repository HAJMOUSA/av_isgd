<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="viewport" content = "height = device-height, width = device-width, user-scalable = no" />
        <title>ISGD AV Control</title>
        <script type="text/javascript" src="/webiopi.js"></script>
        <script type="text/javascript" src="/scripts/ISGD_AV.js"></script>
        <link rel="stylesheet" type="text/css" href="/styles/ISGD_AV.css">
<!--        <link rel="shortcut icon" sizes="196x196" href="/img/ISGD.png" /> -->
<style>
.initbutton {background-color: green;}
  .textbox {
    background: white;
    border: 1px solid #ffa853;
    border-radius: 5px;
    box-shadow: 0 0 5px 3px #ffa853;
    color: #666;
    outline: none;
    height:23px;
    width: 40px;
  }

</style>
</head>
<body
</br>
</br>
<script>

function startup() {
  var el = document.getElementsByTagName("canvas")[0];
  el.addEventListener("touchend", handleEnd, false);
}

function handleEnd(evt) {
}

function ATEN_Comamnd(who) {
	if (who.value == 0){
		document.getElementById("Serial_Command").value="sw o0"+who.name+" off";
	}
	else{
		document.getElementById("Serial_Command").value="sw i0"+who.value +" o0"+who.name;
	}
	//Send Data to serial port
  serialusb0.write(document.getElementById("Serial_Command").value+"\r\n");
}

function ChangeAudioVolume(who)
{
  if(who.id == "MHSlider"){
      if(  document.getElementById("MH_MUTE").checked ==false)
        serialusb1.write('set fader "MH_OUTPUT" '+ who.value+"\r\n");
    }
  else if(who.id == "FYSlider"){
      if(  document.getElementById("FY_MUTE").checked ==false)
          serialusb1.write('set fader "FOYER_OUTPUT" '+ who.value+"\r\n");
        }
  else if(who.id == "GYSlider"){
      if(  document.getElementById("GY_MUTE").checked ==false)
          serialusb1.write('set fader "GYM_OUTPUT" '+who.value+"\r\n");
        }
}

function UpdateVolume(who)
{
  if(who.id == "MHSlider"){
      if(  document.getElementById("MH_MUTE").checked ==false)
          document.getElementById("MH_VOLUME").value = who.value;
    }
  else if(who.id == "FYSlider"){
    if(  document.getElementById("FY_MUTE").checked ==false)
          document.getElementById("FY_VOLUME").value = who.value;
        }
  else if(who.id == "GYSlider"){
    if(  document.getElementById("GY_MUTE").checked ==false)
          document.getElementById("GY_VOLUME").value = who.value;
        }

}

function DisableButton(who)
{
  if(who.checked == true)
    {
      if(who.id == "MH_MUTE"){
        serialusb1.write('set mute "MH_OUTPUT" 1'+"\r\n");
        document.getElementById("MHSlider").disabled = true;
      }else if (who.id =="FY_MUTE"){
        serialusb1.write('set mute "FOYER_OUTPUT" 1'+"\r\n");
          document.getElementById("FYSlider").disabled = true;
      }else if (who.id =="GY_MUTE"){
        serialusb1.write('set mute "GYM_OUTPUT" 1'+"\r\n");
          document.getElementById("GYSlider").disabled = true;
      }
    }
    else
    {
      if(who.id == "MH_MUTE"){
        serialusb1.write('set mute "MH_OUTPUT" 0'+"\r\n");
        document.getElementById("MHSlider").disabled = false;
      }else if (who.id =="FY_MUTE"){
        serialusb1.write('set mute "FOYER_OUTPUT" 0'+"\r\n");
        document.getElementById("FYSlider").disabled = false;
      }else if (who.id =="GY_MUTE"){
        serialusb1.write('set mute "GYM_OUTPUT" 0'+"\r\n");
        document.getElementById("GYSlider").disabled = false;
      }
  }
}
</script>

<h1 align="center" > Audio Control </h1>

<div class="relative">
  <h3>Main Hall Audio Control</h3>
  <p>Mute :

  <input type="checkbox" name="MH_MUTE" id="MH_MUTE" onchange="DisableButton(this)"/>
  </p>
  <input class="textbox" type="text" id="MH_VOLUME" size="20" value=-10 onchange= "ChangeAudioVolume(MHSlider)">
  <input type="range" id= "MHSlider" min="-100" max="20" value="-10" step="1" oninput= "UpdateVolume(this)" onclick="ChangeAudioVolume(this)" touchend= "ChangeAudioVolume(this)" width="304" height="228"/>
</div>

<div class="relative">
  <h3> Foyer Hall Audio Control</h3>
  <p>Mute :
  <input type="checkbox" name="FY_MUTE" id="FY_MUTE" onchange="DisableButton(this)"/>
</p>
  <input class="textbox" type="text" id="FY_VOLUME" size="20" value=-10>
  <input type="range" id= "FYSlider" min="-100" max="20" value="-10" step="1"  oninput= "UpdateVolume(this)" onclick="ChangeAudioVolume(this)" width="304" height="228"/>
</div>
<div class="relative">
  <h3>GYMNASIUM Audio Control</h3>
  <p>Mute :
  <input type="checkbox" name="GY_MUTE" id="GY_MUTE"onchange="DisableButton(this)"/>
  </p>
  <input class="textbox" type="text" id="GY_VOLUME" size="20" value=-10>
  <input type="range" id= "GYSlider" min="-100" max="20" value="-10" step="1"  oninput= "UpdateVolume(this)" onclick="ChangeAudioVolume(this)" width="304" height="228"/>
</div>



<div id="content" align="center"></div>
<div id="canvas">
<h1 align="center"> Video Control </h1>

<section style="margin: 10px;">
<fieldset style="min-height:150px;">
<label> <br/> </label>
<label> <br/> </label>
<fieldset   class="fieldset-auto-width">
	<legend>Prayer Hall Projector's Video input</legend>
		<select name="1" onchange="ATEN_Comamnd(this)" size="5">
      <option value="1" selected="selected"> Main_Hall Camera</option>
		  <option value="2">Main_Hall HDMI</option>
		  <option value="3">Office_HDMI</option>
		  <option value="4">Gymnasium HDMI</option>
		  <option Value="0"> Off</option>
		</select>
</fieldset>

<label> <br/> </label>
<fieldset   class="fieldset-auto-width">
	<legend>Sister's Area Video input</legend>
		<select name="2"  onchange="ATEN_Comamnd(this)" size="5">
      <option value="1" selected="selected"> Main_Hall Camera</option>
		  <option value="2">Main_Hall HDMI</option>
      <option value="3">Office_HDMI</option>
		  <option value="4">Gymnasium HDMI</option>
		  <option Value="0"> Off</option>
		</select>
</fieldset>

<fieldset   class="fieldset-auto-width">
	<legend>Foyer Video input</legend>
		<select name="3" onchange="ATEN_Comamnd(this)" size="5">
      <option value="1" selected="selected"> Main_Hall Camera</option>
		  <option value="2">Main_Hall HDMI</option>
      <option value="3">Office_HDMI</option>
		  <option value="4">Gymnasium HDMI</option>
		  <option Value="0"> Off</option>
		</select>
</fieldset>

<fieldset   class="fieldset-auto-width">
	<legend>Gymansium Video input</legend>
		<select name="4" onchange="ATEN_Comamnd(this)"size="5">
      <option value="1" selected="selected"> Main_Hall Camera</option>
		  <option value="2">Main_Hall HDMI</option>
      <option value="3">Office_HDMI</option>
		  <option value="4">Gymnasium HDMI</option>
		  <option Value="0"> Off</option>
		</select>
</fieldset>
	Command to Send to ATEN <input type="text" id="Serial_Command" size="20">
</body>
</html>
